<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Director | Dashboard</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta name="description" content="Developed By M Abdur Rokib Promy">
    <meta name="keywords" content="Admin, Bootstrap 3, Template, Theme, Responsive">
    <!-- bootstrap 3.0.2 -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- font Awesome -->
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Morris chart -->
    <link href="css/morris/morris.css" rel="stylesheet" type="text/css" />
    <!-- jvectormap -->
    <link href="css/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
    <!-- Date Picker -->
    <link href="css/datepicker/datepicker3.css" rel="stylesheet" type="text/css" />
    <!-- fullCalendar -->
    <!-- <link href="css/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" /> -->
    <!-- Daterange picker -->
    <link href="css/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
    <!-- iCheck for checkboxes and radio inputs -->
    <link href="css/iCheck/all.css" rel="stylesheet" type="text/css" />
    <!-- bootstrap wysihtml5 - text editor -->
    <!-- <link href="css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" /> -->
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <!-- Theme style -->
    <link href="css/style.css" rel="stylesheet" type="text/css" />

</head>
<body class="skin-black">
<!-- header logo: style can be found in header.less -->
<header class="header">
    <a href="index.html" class="logo">
        <!-- Add the class icon to your logo image or logo icon to add the margining -->
        PKM
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top" role="navigation">
        <!-- Sidebar toggle button-->
        <a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>
        <div class="navbar-right">
            <ul class="nav navbar-nav">
                <!-- User Account: style can be found in dropdown.less -->
                <li class="dropdown user user-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-user"></i>
                        <span>My Account<i class="caret"></i></span>
                    </a>
                    <ul class="dropdown-menu dropdown-custom dropdown-menu-right">
                        <li class="dropdown-header text-center">Account</li>
                        <li class="divider"></li>
                        <li>
                            <a href="http://localhost:8080/pkm/html/login.html"><i class="fa fa-ban fa-fw pull-right"></i> Logout</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
</header>

<aside class="left-side sidebar-offcanvas">
    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">
        <!-- Sidebar user panel -->
        <div class="user-panel">
            <div class="pull-left image">
                <img src="img/26115.jpg" class="img-circle" alt="User Image" />
            </div>
            <div class="pull-left info">
                <p>Hello</p>

                <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
            </div>
        </div>
        <!-- search form -->
        <div class="input-group sidebar-form">
            <input type="text" id="search-con" class="form-control" placeholder="Search..."/>
            <span class="input-group-btn">
                <button id='search-btn' class="btn btn-flat"><i class="fa fa-search"></i></button>
            </span>
        </div>
        <!-- /.search form -->
        <!-- sidebar menu: : style can be found in sidebar.less -->
        <ul class="sidebar-menu">
            <li>
                <a href="index.html" >
                    <i class="fa fa-dashboard"></i> <span>文件</span>
                </a>
            </li>
            <li>
                <a href="pic.html">
                    <i class="fa fa-gavel"></i> <span>图片</span>
                </a>
            </li>

            <li>
                <a href="note.html">
                    <i class="fa fa-globe"></i> <span>笔记</span>
                </a>
            </li>

            <li>
                <a href="article.html">
                    <i class="fa fa-glass"></i> <span>我的文章</span>
                </a>
            </li>

            <li class="active">
                <a href="search-article.html">
                    <i class="fa fa-glass"></i> <span>文章共享</span>
                </a>
            </li>

        </ul>
    </section>
</aside>

<!-- Right side column. Contains the navbar and content of the page -->
<aside class="right-side">
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <div class="panel">
                    <header class="panel-heading">
                        <button id='back' class="btn btn-sm btn-primary" >Back</button>&nbsp&nbsp&nbsp&nbsp
                        <input type="radio" name="radio" value="1" checked>按用户名搜索&nbsp
                        <input type="radio" name="radio" value="2">按文章名搜索
                    </header>
                    <!-- <div class="box-header"> -->
                    <!-- <h3 class="box-title">Responsive Hover Table</h3> -->
                    <!-- </div> -->
                    <div class="panel-body table-responsive">
                        <table id="table" class="table table-hover">
                            <tr>
                                <th>名称</th>
                                <th>修改时间</th>
                                <th>用户名</th>
                            </tr>
                        </table>
                    </div><!-- /.box-body -->
                </div><!-- /.box -->
            </div>
        </div>
    </section><!-- /.content -->
</aside><!-- /.right-side -->


<!-- jQuery -->
<script src="js/jquery.min.js" type="text/javascript"></script>
<!-- Bootstrap -->
<script src="js/bootstrap.min.js" type="text/javascript"></script>
<!-- Director App -->
<script src="js/Director/app.js" type="text/javascript"></script>

<script type="text/javascript">
    var json;
    $(document).ready(function () {
        $.ajax({
            type: "POST",
            url: 'http://localhost:8080/pkm/article-recommend',
            data:{},
            success: function (data) {
                json=data;
                var item;
                $.each(data, function(index, value) {
                    item = "<tr ><td id=\""+value['id']+"\" ondblclick=clickaction(this)>" + value['name'] + "</td><td>" + value['time'] + "</td><td>"+value['username']+"</td></tr>";
                    $('.table').append(item);
                });
            }
        });
    });

    function cancel() {
        $(".panel-body").html(" <table id=\"table\" class=\"table table-hover\">\n" +
            "<tr>\n" +
            "<th>名称</th>\n" +
            "<th>修改时间</th>\n" +
            "<th>用户名</th>\n" +
            "</tr>\n" +
            "</table>");
        $.each(json, function(index, value) {
           var item = "<tr ><td id=\""+value['id']+"\" ondblclick=clickaction(this)>" + value['name'] + "</td><td>" + value['time'] + "</td><td>"+value['username']+"</td></tr>";
            $('.table').append(item);
        });
    }

    function clickaction(td){
        $.each(json, function (index, value) {
            if (value['id'] == td.id) {
                $(".panel-body").html("<div align='center' style=\"color:#00FF00\"><h3>" +
                    value['name'] +
                    "</h3></div>" +
                    "<div align='center'><iframe width=\"1000px\" height=\"400px\" frameborder='0' srcdoc='"+ value['content']+
                    "'></iframe></div>");
                return false;
            }
        });
    }
    $('#back').click(function () {
        cancel();
    });
    $('#search-btn').click(function () {
        $.ajax({
            type: "POST",
            url: 'http://localhost:8080/pkm/search',
            data: {
                "way": $('input:radio:checked').val(),
                "search-con": $('#search-con').val()
            },
            success: function (data) {
                json=data;
                var item;
                $('.table').html("<tr> <th>名称</th> <th>修改时间</th><th>用户名</th></tr>");
                $.each(data, function(index, value) {
                    item = "<tr ><td id=\""+value['id']+"\" ondblclick=clickaction(this)>" + value['name'] + "</td><td>" + value['time'] + "</td><td>"+value['username']+"</td></tr>";
                    $('.table').append(item);
                });
            }
        });
    });
</script>


</body>
</html>